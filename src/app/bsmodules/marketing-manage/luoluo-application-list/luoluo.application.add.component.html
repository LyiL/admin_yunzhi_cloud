<nz-card [nzBordered]="false" nzTitle="{{ nzTitle | translate}}" class="ng-card-m">

    <form nz-form [formGroup]="luoApplicationFormGrouo" class="padding-form" (ngSubmit)="onSubmit()">
        <fieldset>
            <!--<legend>{{'luoluo.detailOrAdd.addTitle' | translate}}</legend>-->
            <div nz-row [nzGutter]="40" [nzType]="'flex'" [nzJustify]="'space-between'">

                <div nz-col [nzSpan]="12">
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="4">
                            <label for="appName" nz-form-item-required>{{'luoluo.detailOrAdd.appName' | translate}}</label>
                        </div>
                        <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                            <nz-input [nzSize]="'large'"
                                      [nzId]="'appName'"
                                      [(ngModel)]="model.appName"
                                      formControlName="appName"
                                      nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"></nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('appName').dirty&&getFormControl('appName').hasError('required')">
                                {{'default.validationMessages.emptyErr' | translate}}
                            </div>
                        </div>
                    </div>
                </div>

                <div nz-col [nzSpan]="12">
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="4">
                            <label for="devName" nz-form-item-required>{{'luoluo.detailOrAdd.devName' | translate}}</label>
                        </div>
                        <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                            <nz-input [nzSize]="'large'"
                                      [nzId]="'devName'"
                                      [(ngModel)]="model.devName"
                                      formControlName="devName"
                                      nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"></nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('devName').dirty&&getFormControl('devName').hasError('required')">
                                {{'default.validationMessages.emptyErr' | translate}}
                            </div>
                        </div>
                    </div>
                </div>

                <div nz-col [nzSpan]="12">
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="4">
                            <label for="downloadNum" nz-form-item-required>{{'luoluo.detailOrAdd.downloadNum' | translate}}</label>
                        </div>
                        <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                            <nz-input [nzSize]="'large'"
                                      [nzId]="'downloadNum'"
                                      [(ngModel)]="model.downloadNum"
                                      formControlName="downloadNum"
                                      nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"></nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('downloadNum').dirty&&getFormControl('downloadNum').hasError('required')">
                                {{'default.validationMessages.emptyErr' | translate}}
                            </div>
                            <div nz-form-explain *ngIf="getFormControl('downloadNum').dirty&&getFormControl('downloadNum').value&&getFormControl('downloadNum').hasError('numberError')">
                                {{'default.validationMessages.numberErr' | translate}}
                            </div>
                        </div>
                    </div>
                </div>

                <div nz-col [nzSpan]="12">
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="4">
                            <label for="downloadUrl" nz-form-item-required>{{'luoluo.detailOrAdd.downloadUrl' | translate}}</label>
                        </div>
                        <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                            <nz-input [nzSize]="'large'"
                                      [nzId]="'downloadUrl'"
                                      [(ngModel)]="model.downloadUrl"
                                      formControlName="downloadUrl"
                                      nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"></nz-input>
                            <div nz-form-explain
                                 *ngIf="getFormControl('downloadUrl').dirty && getFormControl('downloadUrl').hasError('required')">
                                {{'default.validationMessages.emptyErr' | translate}}
                            </div>
                            <div nz-form-explain *ngIf="androidFlag" style="color:gray;">
                            {{'luoluo.detailOrAdd.androidInfo' | translate}}
                            </div>
                            <div nz-form-explain *ngIf="iOSFlag" style="color:gray;">
                            {{'luoluo.detailOrAdd.iosInfo' | translate}}
                            </div>
                        </div>
                    </div>
                </div>

                <div nz-col [nzSpan]="12">
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSpan]="4">
                            <label for="platform">{{'luoluo.detailOrAdd.platform' | translate}}</label>
                        </div>
                        <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                            <nz-select nzId="platform"
                                       name="platform"
                                       [(ngModel)]="model.platform"
                                       formControlName="platform"
                                       [nzSize]="'large'"
                                       nzPlaceHolder="{{'default.hint.pleaseChoose'|translate}}"
                            (nzSelectChange)="systemSelect($event)">
                                <nz-option
                                    *ngFor="let platform of platforms | async"
                                    [nzLabel]="platform?.name"
                                    [nzValue]="platform?.id">
                                </nz-option>
                            </nz-select>
                        </div>
                    </div>
                </div>

                <div nz-col [nzSpan]="12">
                    <div nz-row nz-form-item>
                        <div nz-form-label nz-col [nzSpan]="4">
                            <label nz-form-item-required>{{'luoluo.detailOrAdd.releaseTime'|translate}}</label>
                        </div>
                        <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                            <nz-datepicker nzShowTime
                                           [nzSize]="'large'"
                                           name="releaseTime"
                                           nzId="releaseTime"
                                           [(ngModel)]="model.releaseTime"
                                           (ngModelChange)="onReleaseTimeModelChange($event)"
                                           [nzFormat]="'YYYY-MM-DD HH:mm:ss'"
                                           formControlName="releaseTime"
                                           nzPlaceHolder="{{'default.hint.pleaseChoose'|translate}}"
                                           style="width:100%;"></nz-datepicker>
                        </div>
                    </div>
                </div>

                <div nz-col [nzSpan]="22">
                    <div nz-row nz-form-item>
                        <div nz-form-label nz-col [nzSpan]="2">
                            <label nz-form-item-required>{{'luoluo.detailOrAdd.remark'|translate}}</label>
                        </div>
                        <div nz-form-control nz-col [nzSpan]="22" nzHasFeedback>
                            <nz-input [(ngModel)]="model.remark"
                                      formControlName="remark"
                                      [nzType]="'textarea'"
                                      [nzRows]="6"
                                      nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"
                            ></nz-input>
                            <div nz-form-explain
                                 *ngIf="luoApplicationFormGrouo.controls.remark.dirty&&luoApplicationFormGrouo.controls.remark.hasError('required')">
                                {{'luoluo.hint.pleaseRemark'|translate}}
                            </div>
                        </div>
                    </div>
                </div>

                <div nz-col [nzSpan]="20">
                    <div nz-row [nzGutter]="40">
                        <div nz-form-label nz-col [nzSpan]="3">
                            <label nz-form-item-required>{{'luoluo.detailOrAdd.enclosure' | translate}}</label>
                        </div>
                        <div nz-form-control nz-col [nzSpan]="20">
                            <div nz-row [nzType]="'flex'" [nzJustify]="'space-between'">

                                <ng-file-upload required
                                                id="appLogo"
                                                name="appLogo"
                                                formControlName="appLogo"
                                                [options]="defFieldUploadSetting"
                                                placeholder="{{'luoluo.detailOrAdd.appLogo' | translate}}"
                                                [(ngModel)]="model.appLogo"
                                                (onError)="onFileUploadError($event)"></ng-file-upload>

                                <ng-file-upload required
                                                id="appImg1"
                                                name="appImg1"
                                                formControlName="appImg1"
                                                [options]="defFieldUploadSetting"
                                                placeholder="{{'luoluo.detailOrAdd.appImg1' | translate}}"
                                                [(ngModel)]="model.appImg1"
                                                (onError)="onFileUploadError($event)"></ng-file-upload>

                                <ng-file-upload required
                                                id="appImg2"
                                                name="appImg2"
                                                formControlName="appImg2"
                                                [options]="defFieldUploadSetting"
                                                placeholder="{{'luoluo.detailOrAdd.appImg2' | translate}}"
                                                [(ngModel)]="model.appImg2"
                                                (onError)="onFileUploadError($event)"></ng-file-upload>

                                <ng-file-upload required
                                                id="appImg3"
                                                name="appImg3"
                                                formControlName="appImg3"
                                                [options]="defFieldUploadSetting"
                                                placeholder="{{'luoluo.detailOrAdd.appImg3' | translate}}"
                                                [(ngModel)]="model.appImg3"
                                                (onError)="onFileUploadError($event)"></ng-file-upload>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>

        <div nz-form-item nz-row style="margin-top: 50px;">
            <div nz-form-control nz-col class="text-center">
                <nz-button-group>
                    <button nz-button [nzType]="'default'" nzSize="large" (click)="onBack()">
                        <span>{{'default.btn.backBtn' | translate}}</span>
                    </button>
                    <button nz-button [nzType]="'primary'" nzSize="large" [nzLoading]="isLoad" [disabled]='!luoApplicationFormGrouo.valid'>
                        <span>{{'default.btn.saveBtn' | translate}}</span>
                    </button>
                </nz-button-group>
            </div>
        </div>

    </form>
</nz-card>

