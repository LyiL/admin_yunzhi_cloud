<form nz-form [formGroup]="agencyAccountForm" (ngSubmit)="onSave()">
    <div nz-row [nzType]="'flex'" [nzJustify]="'space-between'">
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row >
                <div nz-form-label nz-col [nzSpan]="6">
                    <label for="name" nz-form-item-required>{{'Agency.detailPage.detail.accountTable.name'|translate}}</label>
                </div>
                <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                    <nz-input [nzSize]="'large'" formControlName="name" [nzId]="'name'" [(ngModel)]="model.name" nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('required')">{{'default.validationMessages.emptyErr'|translate}}</div>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row >
                <div nz-form-label  nz-col  [nzSpan]="6">
                    <label for="type" nz-form-item-required>{{'Agency.detailPage.detail.accountTable.type'|translate}}</label>
                </div>
                <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                    <nz-select nzId="type" name="type" [(ngModel)]="model.type" formControlName="type" [nzSize]="'large'" nzPlaceHolder="{{'default.hint.pleaseChoose'|translate}}" (nzSelectChange)="onChangeControl('type')">
                        <nz-option
                            *ngFor="let accountType of accountTypes"
                            [nzLabel]="accountType.name"
                            [nzValue]="accountType.id">
                        </nz-option>
                    </nz-select>
                    <div nz-form-explain *ngIf="getFormControl('type').dirty&&getFormControl('type').hasError('required')">{{'default.validationMessages.emptyErr'|translate}}</div>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row >
                <div nz-form-label nz-col  [nzSpan]="6">
                    <label for="bankCardno" nz-form-item-required>{{'Agency.detailPage.detail.accountTable.bankCardno'|translate}}</label>
                </div>
                <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                    <nz-input [nzSize]="'large'" formControlName="bankCardno" [nzId]="'bankCardno'" [(ngModel)]="model.bankCardno" nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('bankCardno').dirty&&getFormControl('bankCardno').hasError('required')">{{'default.validationMessages.emptyErr'|translate}}</div>
                    <div nz-form-explain *ngIf="getFormControl('bankCardno').dirty&&getFormControl('bankCardno').value&&getFormControl('bankCardno').hasError('numberError')">
                        {{'default.validationMessages.numberErr'|translate}}
                    </div>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row >
                <div nz-form-label nz-col  [nzSpan]="6">
                    <label for="bankName" nz-form-item-required>{{'Agency.detailPage.detail.accountTable.bankName'|translate}}</label>
                </div>
                <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                    <nz-input [nzSize]="'large'" formControlName="bankName" [nzId]="'bankName'" [(ngModel)]="model.bankName" nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('bankName').dirty&&getFormControl('bankName').hasError('required')">{{'default.validationMessages.emptyErr'|translate}}</div>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row >
                <div nz-form-label nz-col  [nzSpan]="6">
                    <label for="subbranchName" *ngIf="onChangeControl('type')" nz-form-item-required>{{'Agency.detailPage.detail.accountTable.subbranchName'|translate}}</label>
                    <label for="subbranchName" *ngIf="!onChangeControl('type')">{{'Agency.detailPage.detail.accountTable.subbranchName'|translate}}</label>
                </div>
                <div nz-form-control nz-col [nzSpan]="18">
                    <search-input [(ngModel)]="model.subbranchName" [name]="'subbranchName'" [nzSize]="'large'" nzPlaceHolder="{{'default.hint.pleaseChoose'|translate}}" formControlName="subbranchName"  nzId="subbranchName"
                                  [tableCfg]="subbranchNameTableCfg" [displayField]="'subBankName'" [valueField]="'subBankName'" (nzSelect)="onSelect($event)"></search-input>
                    <div nz-form-explain *ngIf="onChangeControl('type')" style="color:red;">
                        <!--当账户类型为企业时，开户支行和联行号不能为空！-->
                        {{'Agency.addPage.tips.typeTip'|translate}}
                    </div>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row >
                <div nz-form-label nz-col  [nzSpan]="6">
                    <label for="subbanrchCode" *ngIf="onChangeControl('type')" nz-form-item-required>{{'Agency.detailPage.detail.accountTable.subbanrchCode'|translate}}</label>
                    <label for="subbanrchCode" *ngIf="!onChangeControl('type')">{{'Agency.detailPage.detail.accountTable.subbanrchCode'|translate}}</label>
                </div>
                <div nz-form-control nz-col [nzSpan]="18">
                    <nz-input [nzSize]="'large'" formControlName="subbanrchCode" [nzId]="'subbanrchCode'" [(ngModel)]="model.subbanrchCode" nzPlaceHolder="{{'default.hint.pleaseInput'|translate}}"></nz-input>
                    <div nz-form-explain *ngIf="getFormControl('subbanrchCode').dirty&&getFormControl('subbanrchCode').value&&getFormControl('subbanrchCode').hasError('numberError')">
                        {{'default.validationMessages.numberErr'|translate}}
                    </div>
                    <div nz-form-explain *ngIf="onChangeControl('type')" style="color:red;">
                        <!--当账户类型为企业时，开户支行和联行号不能为空！-->
                        {{'Agency.addPage.tips.typeTip'|translate}}
                    </div>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row >
                <div nz-form-label  nz-col  [nzSpan]="6">
                    <label for="transId" nz-form-item-required>{{'Agency.detailPage.detail.accountTable.transId'|translate}}</label>
                </div>
                <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                    <nz-select nzId="transId" name="transId" nzTags nzShowSearch [(ngModel)]="tmpTransIdArr" formControlName="transId" [nzSize]="'large'" nzPlaceHolder="{{'default.hint.pleaseChoose'|translate}}">
                        <nz-option
                            *ngFor="let payType of payTypes"
                            [nzLabel]="payType.label"
                            [nzValue]="payType.value">
                        </nz-option>
                    </nz-select>
                    <div nz-form-explain *ngIf="getFormControl('transId').dirty&&getFormControl('transId').hasError('required')">{{'default.validationMessages.emptyErr'|translate}}</div>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row >
                <div nz-form-label  nz-col  [nzSpan]="6">
                    <label for="cardType" nz-form-item-required>{{'Agency.detailPage.detail.accountTable.cardType'|translate}}</label>
                </div>
                <div nz-form-control nz-col [nzSpan]="18" nzHasFeedback>
                    <nz-select nzId="cardType" name="cardType" [(ngModel)]="model.cardType" formControlName="cardType" [nzSize]="'large'" nzPlaceHolder="{{'default.hint.pleaseChoose'|translate}}">
                        <nz-option
                            *ngFor="let cardType of cardTypes"
                            [nzLabel]="cardType.name"
                            [nzValue]="cardType.id">
                        </nz-option>
                    </nz-select>
                    <div nz-form-explain *ngIf="getFormControl('cardType').dirty&&getFormControl('cardType').hasError('required')">{{'default.validationMessages.emptyErr'|translate}}</div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button nz-button [nzSize]="'large'" [nzType]="'primary'" [disabled]="!(agencyAccountForm.valid)" [nzLoading]="isLoading">{{'default.btn.saveBtn'|translate}}</button>
    </div>
    <!--<div nz-form-item nz-row  class="text-center">-->
        <!--<div nz-form-control nz-col [nzSpan]="14" [nzOffset]="6">-->
            <!--<button nz-button [nzSize]="'large'" [nzType]="'primary'" [disabled]="!(agencyAccountForm.valid)">{{'default.btn.saveBtn'|translate}}</button>-->
        <!--</div>-->
    <!--</div>-->
</form>
